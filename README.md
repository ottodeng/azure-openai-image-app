# Azure OpenAI Image Generator

ä¸€ä¸ªåŸºäº Azure OpenAI GPT-Image-1 æ¨¡å‹çš„ç°ä»£åŒ–å›¾ç‰‡ç”Ÿæˆå’Œç¼–è¾‘å·¥å…·ã€‚æ”¯æŒå®Œæ•´çš„å‚æ•°é…ç½®ã€å¤šå›¾ç‰‡å¤„ç†å’Œ Docker å®¹å™¨åŒ–éƒ¨ç½²ã€‚

[![GitHub](https://img.shields.io/github/license/ottodeng/azure-openai-image-app)](https://github.com/ottodeng/azure-openai-image-app)
[![GitHub stars](https://img.shields.io/github/stars/ottodeng/azure-openai-image-app)](https://github.com/ottodeng/azure-openai-image-app/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/ottodeng/azure-openai-image-app)](https://github.com/ottodeng/azure-openai-image-app/network)

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### ğŸ¨ å›¾ç‰‡ç”Ÿæˆ
- **æ™ºèƒ½æ–‡æœ¬è½¬å›¾ç‰‡**: åŸºäºè‡ªç„¶è¯­è¨€æè¿°ç”Ÿæˆé«˜è´¨é‡å›¾ç‰‡
- **å¤šç§å°ºå¯¸æ”¯æŒ**: 1024x1024 (æ­£æ–¹å½¢)ã€1024x1536 (ç«–ç‰ˆ)ã€1536x1024 (æ¨ªç‰ˆ)
- **è´¨é‡æ§åˆ¶**: ä½ã€ä¸­ã€é«˜ä¸‰ç§è´¨é‡çº§åˆ«ï¼Œé»˜è®¤é«˜è´¨é‡
- **æ‰¹é‡ç”Ÿæˆ**: ä¸€æ¬¡ç”Ÿæˆ 1-10 å¼ å›¾ç‰‡
- **æ ¼å¼é€‰æ‹©**: æ”¯æŒ PNG (é»˜è®¤) å’Œ JPEG è¾“å‡ºæ ¼å¼
- **å‹ç¼©æ§åˆ¶**: 0-100% å¯è°ƒèŠ‚å‹ç¼©çº§åˆ«
- **å®æ—¶åé¦ˆ**: åŠ è½½æ‚¬æµ®æ¡†æä¾›æ¸…æ™°çš„æ“ä½œçŠ¶æ€åé¦ˆ

### âœï¸ å›¾ç‰‡ç¼–è¾‘
- **å¤šå›¾ç‰‡ä¸Šä¼ **: æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šå¼ å›¾ç‰‡è¿›è¡Œç¼–è¾‘
- **æ™ºèƒ½ç¼–è¾‘**: åŸºäºæ–‡æœ¬æè¿°å¯¹å›¾ç‰‡è¿›è¡Œä¿®æ”¹
- **ä¿çœŸåº¦æ§åˆ¶**: ä½ä¿çœŸåº¦(æ›´å¤šåˆ›æ„å˜åŒ–) å’Œ é«˜ä¿çœŸåº¦(ä¿æŒåŸå›¾ç‰¹å¾)
- **è’™ç‰ˆæ”¯æŒ**: æ”¯æŒä¸Šä¼  PNG è’™ç‰ˆæ–‡ä»¶ç²¾ç¡®æ§åˆ¶ç¼–è¾‘åŒºåŸŸ
- **æ‹–æ‹½ä¸Šä¼ **: ç›´è§‚çš„æ‹–æ‹½å¼æ–‡ä»¶ä¸Šä¼ ä½“éªŒ
- **åŠ è½½çŠ¶æ€**: ç¼–è¾‘è¿‡ç¨‹ä¸­çš„æ¸…æ™°è§†è§‰åé¦ˆ

### ğŸ› ï¸ é«˜çº§åŠŸèƒ½
- **å‚æ•°é¢„è®¾**: ä¿å­˜å’ŒåŠ è½½å¸¸ç”¨å‚æ•°é…ç½®
- **å†å²è®°å½•**: è‡ªåŠ¨ä¿å­˜ç”Ÿæˆå’Œç¼–è¾‘å†å²
- **å›¾ç‰‡ç”»å»Š**: ä¼˜é›…çš„å›¾ç‰‡å±•ç¤ºå’Œç®¡ç†ç•Œé¢
- **ä¸€é”®ä¸‹è½½**: æ”¯æŒå•å¼ å’Œæ‰¹é‡ä¸‹è½½
- **æç¤ºè¯å¤åˆ¶**: å¿«é€Ÿå¤åˆ¶ä¿®è®¢åçš„æç¤ºè¯
- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡

## ï¿½ é¡µé¢å±•ç¤º

![å‰ç«¯ç•Œé¢å±•ç¤º](frontend.png)

## ï¿½ğŸ›  æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: React 18 + JavaScript
- **UI ç»„ä»¶**: shadcn/ui + Tailwind CSS
- **çŠ¶æ€ç®¡ç†**: React Context + useReducer
- **HTTP å®¢æˆ·ç«¯**: Axios
- **æ–‡ä»¶å¤„ç†**: React Dropzone
- **æ„å»ºå·¥å…·**: Vite
- **å®¹å™¨åŒ–**: Docker + Nginx
- **å›¾æ ‡åº“**: Lucide React

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+ 
- pnpm (æ¨è) æˆ– npm
- Docker & Docker Compose (å¯é€‰)
- Azure OpenAI æœåŠ¡è´¦æˆ·å’Œ API å¯†é’¥

### æ–¹æ³•ä¸€ï¼šæœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/ottodeng/azure-openai-image-app.git
   cd azure-openai-image-app
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   pnpm install --config.strict-peer-dependencies=false
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ Azure OpenAI é…ç½®
   ```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   pnpm run dev
   ```

5. **è®¿é—®åº”ç”¨**
   æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5173`

### æ–¹æ³•äºŒï¼šDocker éƒ¨ç½² (æ¨è)

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/ottodeng/azure-openai-image-app.git
   cd azure-openai-image-app
   ```

2. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ Azure OpenAI é…ç½®
   ```

3. **ä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬**
   ```bash
   ./start.sh
   ```
   
   æˆ–æ‰‹åŠ¨æ‰§è¡Œï¼š
   ```bash
   docker-compose up -d --build
   ```

4. **è®¿é—®åº”ç”¨**
   æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`

### æ–¹æ³•ä¸‰ï¼šçº¯ Docker å‘½ä»¤

```bash
# æ„å»ºé•œåƒ
docker build -t azure-openai-image-app .

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:8080 \
  --env-file .env \
  --name azure-openai-image-app \
  azure-openai-image-app
```

## é…ç½®è¯´æ˜

### Azure OpenAI é…ç½®

åœ¨åº”ç”¨ç•Œé¢å³ä¸Šè§’ç‚¹å‡»"é…ç½®"æŒ‰é’®ï¼Œå¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š

- **æœåŠ¡ç«¯ç‚¹**: æ‚¨çš„ Azure OpenAI èµ„æºç«¯ç‚¹ (ä¾‹å¦‚: `https://your-resource.openai.azure.com`)
- **API å¯†é’¥**: Azure OpenAI æœåŠ¡çš„ API å¯†é’¥
- **éƒ¨ç½²åç§°**: GPT-Image-1 æ¨¡å‹çš„éƒ¨ç½²åç§° (é»˜è®¤: `gpt-image-1`)
- **API ç‰ˆæœ¬**: API ç‰ˆæœ¬ (é»˜è®¤: `2025-04-01-preview`)

### ç¯å¢ƒå˜é‡ (å¯é€‰)

å¦‚æœéœ€è¦é¢„è®¾é…ç½®ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env
```

ç„¶ååœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®ä»¥ä¸‹å˜é‡ï¼š

```bash
VITE_AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
VITE_AZURE_OPENAI_API_KEY=your-api-key
VITE_AZURE_OPENAI_DEPLOYMENT=gpt-image-1
VITE_AZURE_OPENAI_API_VERSION=2025-04-01-preview
```

**æ³¨æ„**: `.env` æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œè¯·å‹¿æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚

## API å‚æ•°è¯´æ˜

### å›¾ç‰‡ç”Ÿæˆå‚æ•°

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `prompt` | string | - | å›¾ç‰‡æè¿°æ–‡æœ¬ (å¿…å¡«) |
| `size` | string | "1024x1024" | å›¾ç‰‡å°ºå¯¸ |
| `quality` | string | "high" | å›¾ç‰‡è´¨é‡ (low/high) |
| `n` | number | 1 | ç”Ÿæˆæ•°é‡ (1-10) |
| `output_format` | string | "png" | è¾“å‡ºæ ¼å¼ (png/jpeg/webp) |
| `output_compression` | number | 100 | å‹ç¼©çº§åˆ« (0-100) |

### å›¾ç‰‡ç¼–è¾‘å‚æ•°

é™¤äº†ç”Ÿæˆå‚æ•°å¤–ï¼Œè¿˜åŒ…æ‹¬ï¼š

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `images` | File[] | - | è¾“å…¥å›¾ç‰‡æ–‡ä»¶ (å¿…å¡«) |
| `input_fidelity` | string | "high" | è¾“å…¥ä¿çœŸåº¦ (low/high) |
| `mask` | File | - | è’™ç‰ˆæ–‡ä»¶ (å¯é€‰) |

## é¡¹ç›®ç»“æ„

```
azure-openai-image-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ConfigPanel.jsx  # é…ç½®é¢æ¿
â”‚   â”‚   â”œâ”€â”€ ImageGeneration.jsx # å›¾ç‰‡ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ ImageEdit.jsx    # å›¾ç‰‡ç¼–è¾‘
â”‚   â”‚   â”œâ”€â”€ ImageGallery.jsx # å›¾ç‰‡ç”»å»Š
â”‚   â”‚   â””â”€â”€ ParameterPanel.jsx # å‚æ•°é¢æ¿
â”‚   â”œâ”€â”€ contexts/            # React Context
â”‚   â”‚   â””â”€â”€ AppContext.jsx   # åº”ç”¨çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ azureOpenAI.js   # Azure OpenAI API æœåŠ¡
â”‚   â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ api.js           # API ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ App.jsx              # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”œâ”€â”€ Dockerfile              # Docker é…ç½®
â”œâ”€â”€ docker-compose.yml      # Docker Compose é…ç½®
â”œâ”€â”€ nginx.conf              # Nginx é…ç½®
â””â”€â”€ package.json            # é¡¹ç›®ä¾èµ–
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **åˆ›å»ºç»„ä»¶**: åœ¨ `src/components/` ç›®å½•ä¸‹åˆ›å»ºæ–°ç»„ä»¶
2. **æ›´æ–°çŠ¶æ€**: åœ¨ `AppContext.jsx` ä¸­æ·»åŠ ç›¸å…³çŠ¶æ€å’Œæ“ä½œ
3. **é›†æˆ API**: åœ¨ `azureOpenAI.js` ä¸­æ·»åŠ  API è°ƒç”¨æ–¹æ³•
4. **æ›´æ–°ç•Œé¢**: åœ¨ä¸»åº”ç”¨ä¸­é›†æˆæ–°ç»„ä»¶

### è‡ªå®šä¹‰æ ·å¼

é¡¹ç›®ä½¿ç”¨ Tailwind CSS å’Œ shadcn/ui ç»„ä»¶åº“ï¼š

- å…¨å±€æ ·å¼: `src/App.css`
- ç»„ä»¶æ ·å¼: ä½¿ç”¨ Tailwind ç±»å
- ä¸»é¢˜é…ç½®: `tailwind.config.js`

### é”™è¯¯å¤„ç†

åº”ç”¨åŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

- **API é”™è¯¯**: è‡ªåŠ¨æ•è·å¹¶æ˜¾ç¤º Azure OpenAI API é”™è¯¯
- **ç½‘ç»œé”™è¯¯**: å¤„ç†ç½‘ç»œè¿æ¥é—®é¢˜
- **æ–‡ä»¶éªŒè¯**: éªŒè¯ä¸Šä¼ æ–‡ä»¶ç±»å‹å’Œå¤§å°
- **å‚æ•°éªŒè¯**: ç¡®ä¿å¿…å¡«å‚æ•°å®Œæ•´æ€§

## éƒ¨ç½²é€‰é¡¹

### 1. é™æ€éƒ¨ç½²

æ„å»ºé™æ€æ–‡ä»¶å¹¶éƒ¨ç½²åˆ° CDNï¼š

```bash
pnpm run build
# å°† dist/ ç›®å½•éƒ¨ç½²åˆ°æ‚¨çš„é™æ€æ‰˜ç®¡æœåŠ¡
```

### 2. å®¹å™¨éƒ¨ç½²

ä½¿ç”¨ Docker å®¹å™¨éƒ¨ç½²ï¼š

```bash
# ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
docker-compose -f docker-compose.yml up -d
```

### 3. äº‘å¹³å°éƒ¨ç½²

- **Vercel**: è¿æ¥ GitHub ä»“åº“è‡ªåŠ¨éƒ¨ç½²
- **Netlify**: æ‹–æ‹½ `dist` ç›®å½•éƒ¨ç½²
- **Azure Static Web Apps**: ä¸ Azure OpenAI æœåŠ¡é›†æˆ
- **AWS S3 + CloudFront**: é™æ€ç½‘ç«™æ‰˜ç®¡

## å®‰å…¨è€ƒè™‘

### å‰ç«¯å®‰å…¨

- **API å¯†é’¥ä¿æŠ¤**: å¯†é’¥ä»…å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼éªŒè¯ç”¨æˆ·è¾“å…¥å’Œæ–‡ä»¶ä¸Šä¼ 
- **CORS é…ç½®**: æ­£ç¡®é…ç½®è·¨åŸŸè¯·æ±‚
- **å†…å®¹å®‰å…¨ç­–ç•¥**: é˜²æ­¢ XSS æ”»å‡»

### ç”Ÿäº§ç¯å¢ƒå»ºè®®

- **HTTPS**: å¼ºåˆ¶ä½¿ç”¨ HTTPS åè®®
- **API ä»£ç†**: è€ƒè™‘ä½¿ç”¨åç«¯ä»£ç†éšè— API å¯†é’¥
- **è®¿é—®æ§åˆ¶**: å®æ–½ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- **ç›‘æ§æ—¥å¿—**: è®°å½• API ä½¿ç”¨æƒ…å†µå’Œé”™è¯¯

## æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–

- **ä»£ç åˆ†å‰²**: æŒ‰éœ€åŠ è½½ç»„ä»¶
- **å›¾ç‰‡æ‡’åŠ è½½**: ä¼˜åŒ–å¤§é‡å›¾ç‰‡å±•ç¤º
- **è¯·æ±‚ç¼“å­˜**: é¿å…é‡å¤ API è°ƒç”¨
- **è™šæ‹Ÿæ»šåŠ¨**: å¤„ç†å¤§é‡å†å²è®°å½•

### ç½‘ç»œä¼˜åŒ–

- **è¯·æ±‚å»é‡**: é˜²æ­¢é‡å¤è¯·æ±‚
- **è¶…æ—¶å¤„ç†**: è®¾ç½®åˆç†çš„è¯·æ±‚è¶…æ—¶
- **é‡è¯•æœºåˆ¶**: è‡ªåŠ¨é‡è¯•å¤±è´¥çš„è¯·æ±‚
- **å‹ç¼©ä¼ è¾“**: å¯ç”¨ gzip å‹ç¼©

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **API å¯†é’¥é”™è¯¯**
   - æ£€æŸ¥å¯†é’¥æ ¼å¼å’Œæƒé™
   - ç¡®è®¤ç«¯ç‚¹ URL æ­£ç¡®

2. **å›¾ç‰‡ä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥æ–‡ä»¶æ ¼å¼ (ä»…æ”¯æŒ PNG/JPEG)
   - ç¡®è®¤æ–‡ä»¶å¤§å° (æœ€å¤§ 50MB)

3. **ç”Ÿæˆå¤±è´¥**
   - æ£€æŸ¥æç¤ºè¯æ˜¯å¦è¿åå†…å®¹æ”¿ç­–
   - ç¡®è®¤ Azure OpenAI æœåŠ¡çŠ¶æ€

4. **å®¹å™¨å¯åŠ¨å¤±è´¥**
   - æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µ
   - æŸ¥çœ‹ Docker æ—¥å¿—: `docker logs azure-openai-image-app`

### è°ƒè¯•æ¨¡å¼

å¯ç”¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼š

```bash
# å¼€å‘æ¨¡å¼
pnpm run dev

# æŸ¥çœ‹ç½‘ç»œè¯·æ±‚
# æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· -> Network æ ‡ç­¾
```

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/new-feature`
3. æäº¤æ›´æ”¹: `git commit -am 'Add new feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/new-feature`
5. æäº¤ Pull Request

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [FAQ](docs/FAQ.md)
2. æäº¤ [Issue](https://github.com/ottodeng/azure-openai-image-app/issues)
3. å‚è€ƒ [Azure OpenAI æ–‡æ¡£](https://learn.microsoft.com/en-us/azure/ai-foundry/openai/how-to/dall-e?tabs=gpt-image-1)

---

**æ³¨æ„**: ä½¿ç”¨æœ¬åº”ç”¨éœ€è¦æœ‰æ•ˆçš„ Azure OpenAI æœåŠ¡è®¢é˜…å’Œ GPT-Image-1 æ¨¡å‹è®¿é—®æƒé™ã€‚

